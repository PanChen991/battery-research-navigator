<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电池拆解分析数据库</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Subtle Blue Accent -->
    <!-- Application Structure Plan: The application is designed as an interactive dashboard. The core structure features a header for navigation, a control panel for filtering by manufacturer, a view switcher (list/card), a data visualization area with summary charts, and a main content area displaying report summaries. The default view is a list for information density, with an option to switch to a more visual card layout. This dual-view structure caters to different user preferences: detailed comparison (list) and visual browsing (cards). -->
    <!-- Visualization & Content Choices: 
        1. Manufacturer Distribution (Bar Chart): Report Info -> Number of teardown reports per manufacturer. Goal -> Compare quantities. Viz -> Bar Chart. Interaction -> Updates on filter change. Justification -> Bar charts are excellent for comparing discrete counts across categories. Library -> Chart.js (Canvas).
        2. Cell Type Distribution (Donut Chart): Report Info -> Share of different cell types (e.g., 4680, 21700). Goal -> Show proportion/composition. Viz -> Donut Chart. Interaction -> Updates on filter change. Justification -> Donut charts effectively show part-to-whole relationships. Library -> Chart.js (Canvas).
        3. Detailed Reports (Modal Window): Report Info -> Full 7-column data for a single battery. Goal -> Inform/Organize. Presentation -> Structured text and lists within a modal. Interaction -> Triggered by clicking a summary card or list item button. Justification -> A modal provides detailed information without cluttering the main dashboard, focusing the user's attention on one report at a time. Method -> HTML/CSS/JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f8f7f4;
            color: #3d405b;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .modal {
            transition: opacity 0.25s ease;
        }
        .modal-content {
            transition: transform 0.25s ease;
        }
        .card-hover-effect {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card-hover-effect:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .view-btn-active {
            background-color: #3d405b;
            color: white;
        }
        .view-btn-inactive {
            background-color: #e0e0e0;
            color: #3d405b;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="container mx-auto p-4 sm:p-6 md:p-8">

        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-[#3d405b]">电池竞品拆解分析数据库</h1>
            <p class="mt-2 text-lg text-gray-600">一个用于跟踪和分析圆柱电池竞品拆解报告的交互式仪表板。</p>
        </header>

        <div class="bg-white rounded-xl shadow-sm p-6 mb-8 sticky top-4 z-10">
            <div class="flex flex-col md:flex-row items-center justify-between space-y-4 md:space-y-0">
                <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6">
                    <label for="manufacturer-filter" class="text-lg font-semibold text-gray-700">筛选电池厂:</label>
                    <select id="manufacturer-filter" class="block w-full sm:w-64 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5">
                        <option value="All">所有厂商</option>
                    </select>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-sm font-medium text-gray-600">视图:</span>
                    <button id="list-view-btn" class="p-2 rounded-lg transition-colors duration-200">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 4h18v2H3zm0 7h18v2H3zm0 7h18v2H3z"/></svg>
                    </button>
                    <button id="card-view-btn" class="p-2 rounded-lg transition-colors duration-200">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M4 4h6v6H4zm0 10h6v6H4zm10-10h6v6h-6zm0 10h6v6h-6z"/></svg>
                    </button>
                </div>
            </div>
             <p class="mt-4 text-sm text-gray-500">此仪表板提供了一个集中的平台来查看和比较来自不同制造商的电池的详细拆解报告。通过使用上面的过滤器和视图切换器，您可以专注于特定的公司，并动态更新下面的图表和报告摘要。单击任何报告条目即可深入了解其详细的结构和材料分析。</p>
        </div>
        
        <section id="charts-section" class="mb-8">
             <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h2 class="text-xl font-bold text-center mb-4">各厂商报告数量</h2>
                    <div class="chart-container">
                        <canvas id="manufacturerChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h2 class="text-xl font-bold text-center mb-4">电芯类型分布</h2>
                    <div class="chart-container">
                        <canvas id="cellTypeChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <main id="main-content-area">
        </main>
    </div>

    <div id="report-modal" class="modal fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="modal-content transform -translate-y-10 bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-white border-b p-5 flex justify-between items-center z-10 rounded-t-2xl">
                <h2 id="modal-title" class="text-2xl font-bold text-[#3d405b]"></h2>
                <button id="close-modal" class="text-gray-500 hover:text-gray-800 text-3xl font-light">&times;</button>
            </div>
            <div id="modal-body" class="p-6 md:p-8">
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const teardownData = [
                {
                    id: 1,
                    teardownParty: "A2MAC1",
                    productName: "Tesla 4680 Gen 2",
                    cellInfo: "4680, ~26Ah, 高镍+硅碳",
                    manufacturer: "TESLA",
                    vehicleModel: "Tesla Model Y (Austin)",
                    url: "https://www.a2mac1.com/benchmark/tesla-model-y-4680-teardown-reveals-genius-engineering/",
                    report: {
                        external: [
                            { title: "整体设计", content: "采用无极耳（干法电极）技术，大幅降低内阻和产热。" },
                            { title: "壳体", content: "高强度钢壳，厚度约0.6mm，兼顾安全与能量密度。" },
                            { title: "顶盖结构", content: "集成CID（电流中断装置）、PTC和防爆阀，采用激光焊接，结构紧凑可靠。" },
                            { title: "集流体", content: "正负极集流盘采用激光焊接到卷芯端面，工艺复杂但导电性能优异。" }
                        ],
                        materials: [
                            { title: "正极材料", content: "NCM811，高镍体系以提高能量密度。" },
                            { title: "负极材料", content: "硅碳复合负极（约10%硅含量），提升克容量。" },
                            { title: "隔膜", content: "陶瓷涂层聚乙烯（PE）隔膜，增强安全性和耐热性。" },
                            { title: "电解液", content: "包含VC、FEC等添加剂，优化高温性能和循环寿命。" }
                        ]
                    }
                },
                {
                    id: 2,
                    teardownParty: "才神道",
                    productName: "EVE Power Cylinder Cell 4695",
                    cellInfo: "4695, ~33Ah, 高镍+快充石墨",
                    manufacturer: "EVE",
                    vehicleModel: "宝马新世代概念车 (装车预测)",
                    url: "https://www.csd.tech/news/2458.html",
                    report: {
                        external: [
                            { title: "整体设计", content: "全极耳设计，支持9C超高峰值充电倍率。" },
                            { title: "壳体", content: "0.55mm薄壁钢壳，优化能量密度。采用预镀镍工艺。" },
                            { title: "顶盖结构", content: "结构与4680类似，但针对快充优化了泄压阀开启压力。" },
                            { title: "集流体", content: "铜铝复合集流盘，通过超声波焊或激光焊连接极耳。" }
                        ],
                        materials: [
                            { title: "正极材料", content: "NCM9系高镍材料，提升能量密度。" },
                            { title: "负极材料", content: "特殊表面处理的快充石墨，兼顾能量密度和充电速度。" },
                            { title: "隔膜", content: "7μm基膜+2μm陶瓷涂层，提升离子电导率。" },
                            { title: "电解液", content: "低粘度溶剂体系，配合新型锂盐和功能添加剂，支持4C快充。" }
                        ]
                    }
                },
                {
                    id: 3,
                    teardownParty: "汽车之家",
                    productName: "CATL Qilin Battery (Cell Level)",
                    cellInfo: "CTP 3.0, 140Ah (单体), 方形",
                    manufacturer: "CATL",
                    vehicleModel: "极氪 009 / 理想 MEGA",
                    url: "https://www.autohome.com.cn/tech/202206/1255593.html",
                    report: {
                        external: [
                            { title: "整体设计", content: "非圆柱。大面冷却技术，换热面积扩大4倍，支持5分钟热启动和10分钟快充。" },
                            { title: "壳体", content: "轻量化铝合金外壳，作为麒麟电池结构件的一部分。" },
                            { title: "顶盖结构", content: "高集成度顶盖，包含防爆阀、熔断丝和BMS采集单元接口。" },
                            { title: "电芯连接", content: "电芯倒置，底部通过柔性连接件与水冷板相连，提升安全性。" }
                        ],
                        materials: [
                            { title: "正极材料", content: "提供磷酸铁锂（LFP）和高镍三元（NCM）两种版本，满足不同需求。" },
                            { title: "负极材料", content: "快充石墨体系，表面进行特殊包覆处理。" },
                            { title: "隔膜", content: "高孔隙率隔膜，涂覆功能性涂层以抑制锂枝晶。" },
                            { title: "电解液", content: "针对快充和长寿命优化的功能性电解液。" }
                        ]
                    }
                },
                 {
                    id: 4,
                    teardownParty: "盖世汽车",
                    productName: "BYD Blade Battery (Cell Level)",
                    cellInfo: "刀片电池, 960mm长, 方形",
                    manufacturer: "BYD",
                    vehicleModel: "比亚迪汉、海豹等",
                    url: "https://auto.gasgoo.com/news/202003/29I70172679C109.shtml",
                    report: {
                        external: [
                            { title: "整体设计", content: "非圆柱。长条形刀片设计，既是电芯也是结构件，提升电池包体积利用率和结构强度。" },
                            { title: "壳体", content: "蜂窝铝板结构，提供极高的结构刚度和碰撞安全性。" },
                            { title: "顶盖结构", content: "简化的顶盖设计，电极位于两端，易于串联。" },
                            { title: "散热设计", content: "电芯大面积与冷却板接触，散热效率高。" }
                        ],
                        materials: [
                            { title: "正极材料", content: "优化的磷酸铁锂（LFP）材料，能量密度相比传统LFP提升。" },
                            { title: "负极材料", content: "人造石墨。" },
                            { title: "隔膜", content: "高性能陶瓷涂层隔膜，通过了严苛的针刺测试。" },
                            { title: "电解液", content: "长寿命电解液配方。" }
                        ]
                    }
                }
            ];

            const filterSelect = document.getElementById('manufacturer-filter');
            const mainContentArea = document.getElementById('main-content-area');
            const modal = document.getElementById('report-modal');
            const closeModalBtn = document.getElementById('close-modal');
            const cardViewBtn = document.getElementById('card-view-btn');
            const listViewBtn = document.getElementById('list-view-btn');
            
            let manufacturerChart, cellTypeChart;
            let currentFilter = 'All';
            let currentView = 'list';

            function setupControls() {
                const manufacturers = [...new Set(teardownData.map(item => item.manufacturer))];
                manufacturers.forEach(manufacturer => {
                    const option = document.createElement('option');
                    option.value = manufacturer;
                    option.textContent = manufacturer;
                    filterSelect.appendChild(option);
                });
                filterSelect.addEventListener('change', (e) => {
                    currentFilter = e.target.value;
                    render();
                });
                
                cardViewBtn.addEventListener('click', () => setView('card'));
                listViewBtn.addEventListener('click', () => setView('list'));
            }

            function setView(view) {
                currentView = view;
                cardViewBtn.classList.toggle('view-btn-active', view === 'card');
                cardViewBtn.classList.toggle('view-btn-inactive', view !== 'card');
                listViewBtn.classList.toggle('view-btn-active', view === 'list');
                listViewBtn.classList.toggle('view-btn-inactive', view !== 'list');
                render();
            }

            function renderCards() {
                mainContentArea.className = 'grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6';
                const filteredData = teardownData.filter(item => currentFilter === 'All' || item.manufacturer === currentFilter);
                
                if (filteredData.length === 0) {
                     mainContentArea.innerHTML = `<p class="text-gray-500 col-span-full text-center">未找到符合条件的报告。</p>`;
                     return;
                }

                mainContentArea.innerHTML = filteredData.map(item => `
                    <div class="bg-white rounded-xl shadow-sm p-6 flex flex-col justify-between card-hover-effect">
                        <div>
                            <span class="inline-block bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full">${item.manufacturer}</span>
                            <h3 class="text-xl font-bold mt-2 mb-2 text-gray-800">${item.productName}</h3>
                            <p class="text-gray-600 text-sm mb-4"><strong>电芯:</strong> ${item.cellInfo}</p>
                            <p class="text-gray-600 text-sm"><strong>装车型号:</strong> ${item.vehicleModel}</p>
                        </div>
                        <button data-id="${item.id}" class="view-details-btn mt-6 w-full bg-[#3d405b] text-white font-bold py-2 px-4 rounded-lg hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#3d405b]">
                            查看详细报告
                        </button>
                    </div>
                `).join('');
            }

            function renderList() {
                mainContentArea.className = 'bg-white rounded-xl shadow-sm overflow-x-auto';
                 const filteredData = teardownData.filter(item => currentFilter === 'All' || item.manufacturer === currentFilter);

                if (filteredData.length === 0) {
                     mainContentArea.innerHTML = `<p class="text-gray-500 text-center p-8">未找到符合条件的报告。</p>`;
                     return;
                }

                const tableRows = filteredData.map(item => `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="p-4">${item.teardownParty}</td>
                        <td class="p-4 font-medium text-gray-900">${item.productName}</td>
                        <td class="p-4">${item.cellInfo}</td>
                        <td class="p-4"><span class="inline-block bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full">${item.manufacturer}</span></td>
                        <td class="p-4">${item.vehicleModel}</td>
                        <td class="p-4"><a href="${item.url}" target="_blank" class="text-blue-600 hover:underline">链接</a></td>
                        <td class="p-4"><button data-id="${item.id}" class="view-details-btn bg-gray-200 text-gray-700 font-bold py-1 px-3 rounded-lg hover:bg-gray-300 text-sm">查看</button></td>
                    </tr>
                `).join('');

                mainContentArea.innerHTML = `
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                            <tr>
                                <th scope="col" class="p-4">拆解方</th>
                                <th scope="col" class="p-4">竞品名称</th>
                                <th scope="col" class="p-4">电芯信息</th>
                                <th scope="col" class="p-4">电池厂</th>
                                <th scope="col" class="p-4">装车型号</th>
                                <th scope="col" class="p-4">网址</th>
                                <th scope="col" class="p-4">报告</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${tableRows}
                        </tbody>
                    </table>
                `;
            }
            
            function createCharts() {
                const manufacturerCtx = document.getElementById('manufacturerChart').getContext('2d');
                manufacturerChart = new Chart(manufacturerCtx, {
                    type: 'bar',
                    data: { labels: [], datasets: [{ label: '报告数量', data: [], backgroundColor: 'rgba(61, 64, 91, 0.7)', borderColor: 'rgba(61, 64, 91, 1)', borderWidth: 1 }] },
                    options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { beginAtZero: true, ticks: { stepSize: 1 } } }, plugins: { legend: { display: false } } }
                });

                const cellTypeCtx = document.getElementById('cellTypeChart').getContext('2d');
                cellTypeChart = new Chart(cellTypeCtx, {
                    type: 'doughnut',
                    data: { labels: [], datasets: [{ data: [], backgroundColor: ['#e07a5f', '#81b29a', '#f2cc8f', '#6d6875', '#b5838d'], }] },
                    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'top' } } }
                });
            }

            function updateCharts() {
                const filteredData = teardownData.filter(item => currentFilter === 'All' || item.manufacturer === currentFilter);
                const manufacturerCounts = teardownData.reduce((acc, item) => { acc[item.manufacturer] = (acc[item.manufacturer] || 0) + 1; return acc; }, {});
                const cellTypeCounts = filteredData.reduce((acc, item) => { const type = item.cellInfo.includes('4680') || item.cellInfo.includes('4695') ? '大圆柱' : (item.cellInfo.includes('方形') ? '方形' : '其他'); acc[type] = (acc[type] || 0) + 1; return acc; }, {});

                manufacturerChart.data.labels = Object.keys(manufacturerCounts);
                manufacturerChart.data.datasets[0].data = Object.values(manufacturerCounts);
                manufacturerChart.update();
                
                cellTypeChart.data.labels = Object.keys(cellTypeCounts);
                cellTypeChart.data.datasets[0].data = Object.values(cellTypeCounts);
                cellTypeChart.update();
            }

            function showModal(id) {
                const item = teardownData.find(d => d.id === parseInt(id));
                if (!item) return;

                document.getElementById('modal-title').textContent = `${item.productName} 详细拆解报告`;
                const modalBody = document.getElementById('modal-body');
                const createDetailList = (items) => items.map(detail => `<div class="mb-3"><h5 class="font-semibold text-gray-700">${detail.title}</h5><p class="text-gray-600 pl-2">${detail.content}</p></div>`).join('');
                
                modalBody.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                        <div class="bg-gray-50 p-4 rounded-lg"><strong class="text-gray-800">拆解方:</strong> ${item.teardownParty}</div>
                        <div class="bg-gray-50 p-4 rounded-lg"><strong class="text-gray-800">电池厂:</strong> ${item.manufacturer}</div>
                        <div class="bg-gray-50 p-4 rounded-lg"><strong class="text-gray-800">电芯信息:</strong> ${item.cellInfo}</div>
                        <div class="bg-gray-50 p-4 rounded-lg"><strong class="text-gray-800">装车型号:</strong> ${item.vehicleModel}</div>
                        <div class="bg-gray-50 p-4 rounded-lg col-span-1 md:col-span-2"><strong class="text-gray-800">信息来源:</strong> <a href="${item.url}" target="_blank" class="text-blue-600 hover:underline break-all">${item.url}</a></div>
                    </div>
                    <div class="mt-8 border-t pt-6"><h4 class="text-xl font-bold mb-4 text-[#3d405b]">外部结构分析</h4>${createDetailList(item.report.external)}</div>
                    <div class="mt-8 border-t pt-6"><h4 class="text-xl font-bold mb-4 text-[#3d405b]">材料体系分析</h4>${createDetailList(item.report.materials)}</div>`;

                modal.classList.remove('hidden');
                setTimeout(() => { modal.classList.remove('opacity-0'); modal.querySelector('.modal-content').classList.remove('-translate-y-10'); }, 10);
            }

            function hideModal() {
                 modal.classList.add('opacity-0');
                 modal.querySelector('.modal-content').classList.add('-translate-y-10');
                 setTimeout(() => { modal.classList.add('hidden'); }, 250);
            }

            mainContentArea.addEventListener('click', e => {
                const button = e.target.closest('.view-details-btn');
                if (button) {
                    const id = button.getAttribute('data-id');
                    showModal(id);
                }
            });

            closeModalBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', e => { if (e.target === modal) hideModal(); });
            document.addEventListener('keydown', e => { if (e.key === 'Escape') hideModal(); });

            function render() {
                if (currentView === 'card') {
                    renderCards();
                } else {
                    renderList();
                }
                updateCharts();
            }
            
            setupControls();
            createCharts();
            setView('list');
        });
    </script>
</body>
</html>

